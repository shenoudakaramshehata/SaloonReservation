@using Microsoft.AspNetCore.Localization
<div class="dropdown ms-1 topbar-head-dropdown header-item">
          
    <button type="button" class="btn btn-icon btn-topbar btn-ghost-secondary rounded-circle"
            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            @{
        var locale = Context.Request.HttpContext.Features.Get<IRequestCultureFeature>();
        var BrowserCulture = locale.RequestCulture.UICulture.ToString();
            if (BrowserCulture == "en-US")
            {
                <img id="header-lang-img" src="~/assets/images/flags/us.svg" alt="Header Language" height="20"
                     class="rounded">   
            }
            else
            {
                <img id="header-lang" src="~/assets/images/flags/kw.svg" alt="Header Language" height="20"
                 class="rounded">
            }
            }
       
    </button>
    <div class="dropdown-menu dropdown-menu-end">

        <!-- item-->
        <a asp-controller="Setting" asp-action="ChangeLanguage" asp-route-culture="en-US" asp-route-url="@Context.Request.Path@Context.Request.QueryString.ToString()" class="dropdown-item dropdown-toggle" onclick="LangChange('en')">
            <img src="~/assets/images/flags/us.svg" alt="user-image" class="me-2 rounded" height="18">
            <span class="align-middle">English</span>
        </a>
       

        <!-- item-->
        <a asp-controller="Setting" asp-action="ChangeLanguage" asp-route-culture="ar-EG" asp-route-url="@Context.Request.Path@Context.Request.QueryString.ToString()" class="dropdown-item dropdown-toggle" onclick="LangChange('ar')">
            <img src="~/assets/images/flags/kw.svg" alt="user-image" class="me-2 rounded" height="18">
            <span class="align-middle">اللغة العربية</span>
        </a>


    
    </div>
</div>


<script>
    function LangChange(lang) {
        console.log("Lang")
        var anch1 = document.getElementById("ang1");
        var anch2 = document.getElementById("ang2");
        var masterPage = document.getElementById("masterPageId");
        if (lang == "en") {
            localStorage.setItem("lang", "en");

        }
        if (lang == "ar") {

            localStorage.setItem("lang", "ar");

        }

    }
    window.addEventListener('DOMContentLoaded', (event) => {
        var masterPage = document.getElementById("masterPageId");
        if (localStorage.getItem("lang") != "") {
            if (localStorage.getItem("lang") == "en") {
                masterPage.dir = "ltr";
                LangSelec.innerHTML = "En";

                document.getElementById("masterbodyid").style.textAlign = "left"

            }
            else if (localStorage.getItem("lang") == "ar") {


                masterPage.dir = "rtl"
                LangSelec.innerHTML = "AR";
                console.log(document.getElementById("masterbodyid"))
                document.getElementById("masterbodyid").style.textAlign = "right"


            }
        }
    });


</script>
